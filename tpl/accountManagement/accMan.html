<!DOCTYPE html>
<html lang="zn">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <title>权限管理</title>
    <link rel="stylesheet" href="../../css/common/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" type="text/css" href="../../css/common/common.css"/>
    <link rel="stylesheet" type="text/css" href="../../font/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/accountManagement/accMan.css"/>
</head>
<body>

<section>

    <div id="header_input">
        <input type="button" value="新增+" class="bc gbtn" id="add"/>
    </div>

    <div id="table_div">
        <table border="1" cellspacing="0" cellpadding="0">
            <tr>
                <th class="t1">用户角色
                    <i class="iconfont icon-search"></i>
                    <div class="search_div_table">
                        <i class="iconfont icon-search"></i>
                        <input type="text" value=""/>
                        <span>搜索</span>
                    </div>
                </th>
                <th class="t3">拥有权限
                    <i class="iconfont icon-search"></i>
                    <div class="search_div_table">
                        <i class="iconfont icon-search"></i>
                        <input type="text" value=""/>
                        <span>搜索</span>
                    </div>
                </th>
                <th class="t4">创建时间
                    <i class="iconfont icon-search"></i>
                    <div class="search_div_table">
                        <i class="iconfont icon-search"></i>
                        <input type="text" value=""/>
                        <span>搜索</span>
                    </div>
                </th>
                <th class="t5">操作</th>
            </tr>
            <tr>
                <td>管理员</td>
                <td>兑换管理-兑换配置(新增，查看，编辑，删除)</td>
                <td>2017/8/26 22:22:22</td>
                <td>
                    <input type="button" class="sbtn cb" value="编辑"/>
                    <input type="button" class="sbtn ql del_ipt" value="删除"/>
                </td>
            </tr>
            <tr>
                <td>管理员</td>
                <td>兑换管理-兑换配置(新增，查看，编辑，删除)</td>
                <td>2017/8/26 22:22:22</td>
                <td>
                    <input type="button" class="sbtn cb" value="编辑"/>
                    <input type="button" class="sbtn ql del_ipt" value="删除"/>
                </td>
            </tr>
            <tr>
                <td>管理员</td>
                <td>兑换管理-兑换配置(新增，查看，编辑，删除)</td>
                <td>2017/8/26 22:22:22</td>
                <td>
                    <input type="button" class="sbtn cb" value="编辑"/>
                    <input type="button" class="sbtn ql del_ipt" value="删除"/>
                </td>
            </tr>

        </table>

        <div id="page">
            <div>

            </div>

            <div id="page_right">
                <span>共	记录<span>4</span>条，每页<span>10</span>条</span>
            </div>
        </div>

    </div>
</section>

<div id="layer">
    <div class="layer_tit">
        <span>新增角色</span>
        <i id="close_lay" class="iconfont icon-close"></i>
    </div>

    <div class="layer_content">
        <div class="layer_tab">
            <span>选择角色：</span>
            <div class="select dowebok">
                <span class="placeholder">请选择</span>
                <ul>
                    <li>百度</li>
                    <li>谷歌</li>
                    <li>雅虎</li>
                    <li>新浪</li>
                </ul>
            </div>
        </div>
        <div class="layer_tab layerLitTab">
            <span>拥有权限：</span>
        </div>
        <div class="tree">
            <div class="zTreeDemoBackground left">
                <ul id="treeDemo" class="ztree"></ul>    <!-- 官方api:http://www.treejs.cn/v3/api.php -->
            </div>
        </div>
    </div>

    <div class="btnG">
        <input type="button" name="" id="" value="保存" class="bc zbtn save"/>
        <input type="button" name="" id="cz" value="重置" class="bc zbtn ql reset"/>
        <input type="button" name="" id="" value="关闭" class="bc zbtn red close"/>
    </div>

</div>

<script type="text/javascript" src="../../js/common/jquery-2.2.3.js"></script>
<script type="text/javascript" src="../../js/common/ztree/js/jquery.ztree.core.min.js"></script>
<script type="text/javascript" src="../../js/common/ztree/js/jquery.ztree.excheck.min.js"></script>
<script type="text/javascript" src="../../js/common/common.js"></script>
<script type="text/javascript" src="../../js/accountManagement/accMan.js"></script>
<script>
    var setting = {
        view: {
            selectedMulti: false
        },
        check: {
            enable: true
        },
        data: {
            simpleData: {
                enable: true
            }
        },
        callback: {
            onCheck: onCheck
        }
    };

    var zNodes =[
//        { id:1, pId:0, name:"随意勾选 1", open:true},
//        { id:11, pId:1, name:"随意勾选 1-1"},
//        { id:12, pId:1, name:"随意勾选  1-2", open:true},
//        { id:121, pId:12, name:"随意勾选 1-2-1", checked:true},
//        { id:122, pId:12, name:"随意勾选 1-2-2"},
//        { id:123, pId:12, name:"随意勾选 1-2-3"},
//        { id:13, pId:1, name:"随意勾选 1-3"},
//        { id:2, pId:0, name:"随意勾选 2", open:true},
//        { id:21, pId:2, name:"随意勾选 2-1"},
//        { id:22, pId:2, name:"随意勾选 2-2", open:true},
//        { id:221, pId:22, name:"随意勾选 2-2-1", checked:true},
//        { id:222, pId:22, name:"随意勾选 2-2-2"},
//        { id:223, pId:22, name:"随意勾选 2-2-3"},
//        { id:23, pId:2, name:"随意勾选 2-3", checked:true}
    ];

    var clearFlag = false;
    function onCheck(e, treeId, treeNode) {
        count();
        if (clearFlag) {
            clearCheckedOldNodes();
        }
    }
    function clearCheckedOldNodes() {
        var zTree = $.fn.zTree.getZTreeObj("treeDemo"),
                nodes = zTree.getChangeCheckedNodes();
        for (var i=0, l=nodes.length; i<l; i++) {
            nodes[i].checkedOld = nodes[i].checked;
        }
    }
    function count() {
        var zTree = $.fn.zTree.getZTreeObj("treeDemo"),
                checkCount = zTree.getCheckedNodes(true).length,
                nocheckCount = zTree.getCheckedNodes(false).length,
                changeCount = zTree.getChangeCheckedNodes().length;
        $("#checkCount").text(checkCount);
        $("#nocheckCount").text(nocheckCount);
        $("#changeCount").text(changeCount);

    }
    function createTree() {
        $.fn.zTree.init($("#treeDemo"), setting, zNodes);
        count();
        clearFlag = $("#last").attr("checked");
    }

    $(document).ready(function(){
        createTree();
        $("#init").bind("change", createTree);
        $("#last").bind("change", createTree);
    });



$('#cz').click(function () {   //动态添加节点  (点击重置按钮)
    $('#treeDemo').html('');

    var treeObj = $.fn.zTree.getZTreeObj("treeDemo");

    var node =[
        { id:1, pId:0, name:"随意勾选 1", open:true},
        { id:11, pId:1, name:"随意勾选 1-1"},
        { id:12, pId:1, name:"随意勾选  1-2", open:true},
        { id:121, pId:12, name:"随意勾选 1-2-1", checked:true},
        { id:122, pId:12, name:"随意勾选 1-2-2"},
        { id:123, pId:12, name:"随意勾选 1-2-3"},
        { id:13, pId:1, name:"随意勾选 1-3"},
        { id:2, pId:0, name:"随意勾选 2", open:true},
        { id:21, pId:2, name:"随意勾选 2-1"},
        { id:22, pId:2, name:"随意勾选 2-2", open:true},
        { id:221, pId:22, name:"随意勾选 2-2-1", checked:true},
        { id:222, pId:22, name:"随意勾选 2-2-2"},
        { id:223, pId:22, name:"随意勾选 2-2-3"},
        { id:23, pId:2, name:"随意勾选 2-3", checked:true}
    ];

    treeObj.addNodes(null, node);

})

</script>

</body>
</html>